<!DOCTYPE html>
<html>
<head>
    <title>HIA Immersion TUSM Case Study 2</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #5967e7;
            color: #fafafa;
            padding: 20px;
            text-align: center;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .navbar-nav {
            margin-right: auto; /* Push the navbar to the left */
        }


        h1 {
            color: #ffffff;
        }

        section {
            margin-bottom: 20px;
        }

        ul {
            list-style: disc;
            margin-left: 20px;
        }

        footer {
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 10px;
        }
        
    </style>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Python Code Card</title>
        
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-okaidia.min.css">
        
</head>
</head>
<body>
    <header>
        <h1>Tufts University Health Informatics and Analytics Immersion Fall 2023</h1>
    </header>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="CaseStudy1">Case1</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="CaseStudy2">Case2</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="Resource">Resources</a>
                </li>
            </ul>
        </div>
    </nav>

        <!-- Introduction -->
    <section>
        <div class="container mt-2">
            <div class="card">
                <div class="card-body"> 
                            <h2 class="card-title"> The Setting</h2>
                            <p class="italic">Disclaimer: This case is a work of fiction. Names, characters, places and incidents either are products of the case writersâ€™ imagination or are used fictitiously. Any resemblance to actual events or locales or persons, living or dead, is entirely coincidental.</p>
                            <p>Your client, the Jefferson Heights Hospital (JHH), wants to design a tool to identify implicit bias in its health outcomes. This is part of a national initiative to be recognized as an anti-racist hospital. One of the potential areas that leadership has identified to examine is the variation in pain treatment by race ethnicity among people who visited the emergency department (ED) between 2015 and 2021. </p>
                            <p>The researchers in the hospital have identified an indicator for pain score reported during the ED visit along with 5 broad indicators of patient complaints at the visit. With additional information collected during the ED stay, the patients were provided up to 5 initial diagnoses along with an indicator for injury (pain scale 0 - 10), and indicator for medications used during the emergency stay. JHH wants to examine if there was a variation in treatment of people who reported pain over 5 by gender, race, and ethnicity.  </p>
                            <p>Requirement: The HIA consultant group is tasked with analyzing outcomes associated with ED visit by gender, race and ethnicity at Jefferson Heights Hospital. Your task is to identify which were the most common medications that were used during the ED visit and at discharge at the hospital. The task is to also examine if the rates of pain medications (NSAIDs and narcotic/opioid) used to manage pain differed by gender and race ethnicity. </p>
                            <p>Your task is to develop the baseline metrics for evaluation and present it to the hospital. The hospital will then evaluate the metric and suggest edits before providing the full dataset for analysis. </p>
                            <p>You can pick from two options below: Case 1 involves performing simpler analysis and creating tables using R or Stata. Case 2 is for advanced students who want to use python and run advanced analyses.</p>
    
                        
                </div>
                
                <div class="container">
                    <img class="img-fluid" src="{{ url_for('static', filename='images/Img_work.jpg') }}" alt="Image 1">
                </div>


                <div class="card-body"> 
                    <h2 class="card-title text-center">Data Analysis</h2>
                    <div class="card">
                        <div class="card-body">


                            <h3>1. Explore the data</h3>
                            
                            <p>You can download the data using the link <a href="/download/dataset_10k.csv" download="data.csv">here</a>.</p>
                            <p>The data includes 10000 observations from JHH hospital between 2016 - 2022.</p>
                            <p>The description of the variables that are in the dataset are provided at the end of this page </p>
                            <p>Before we delve into the analysis, it is best to checkout the variables present in the dataset, identify what are variables you require to create the preliminary report and then explore the variables.</p>
                            <p>Summarize the following</p>
                            
                            <ul>
                                <li>number of observations in the dataset</li>
                                <li>Percentage race and ethnicity</li>
                                <li>Percentage male and female</li>
                                <li>Average age</li>
                                <li>Number of observations in the dataset where there is a valid pain score</li>
                                <li>Number of observations where the patient received medication in the ED</li>
                                <li>Average number of diagnosis per patient</li>
                                <li>Average number of medications/prescriptions per patient</li>
                                <li>Average time of Emergency department stay</li>
                                <li>Percentage of people who were admitted to the hospital</li>
                            </ul>
                        </div>
                        
                    </div>
                    <br>

                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">R Code Example</h5>
                                <pre>
                                    <code class="language-r">

install.packages("table1")
library(table1)

# Read data from a CSV file (replace with your file path)
data <- read.csv("your_data.csv")

summary_table <- table1(
  ~ age + gender + race,
  data = data
)

print(summary_table)

# Note you will need to format the dataset. Change the variable name and labels and add units as needed
# Look up your codes from HIA 226 or the documentation for table1 library for more information

                                </code>
                                </pre>
                            </div>
                        </div>



                    <br>
                    <div class="card">
                        <div class="card-body">
                            <h3>2. Creating new variables and summarizing</h3>
                            
                            <p>Lets dive deeper into the dataset. First you need to remove all the observations where a valid pain score was not reported.</p>
                            <p> [However, just removing that may not be an option. What if the patients who do not have a valid pain score are different from the patient who have a valid/reported pain score in the database. How will you account for this (not required for this immersion but something to think about)]</p>

                            <p>Next, create a binary indicator variable ( value 0 for people who reported a pain score of 4 or lower, and 1 for people who reported pain score of 5 or higher). </p>
                            <p>Create bivariate summary table by the binary pain variable (high pain vs low pain) for the following variables:</p>
                            <ul>
                                <li>Gender</li>
                                <li>Race/ethnicity</li>
                                <li>Age</li>
                                <li>Any medication received</li>
                                <li>Total number of medication received</li>
                                <li>Percentage of people who received Non-steroidal anti-inflammatory drugs (NSAIDs; non opioid drugs) </li>
                                <li>Percentage of people who received Opioid medications</li>
                                <li>Average length of stay in the emergency department</li>
                                <li>Percentage of people who were admitted to the hospital</li>
                                <li>Percentage patient rating</li>
                            </ul>
                        </div>
                        
                    </div>

                    <br>
                    <div class="card">
                        <div class="card-body">
                            <h3>3. Subsetting data and examining difference in pain management by gender and race ethnicity</h3>
                            
                            <p>Lets shift our focus on the people who have a higher degree of pain. Create a subset of the dataset only keeping those who rate pain scores of 5 or higher.</p>

                            <p>Create bivariate summary table by gender to examine if there is any differences in age, any medication received, total number of medications received, non-steroidal anti-inflammatory drugs (NSAIDs; non opioid drugs) received, opioid medications received, average length of stay in the emergency department, percentage of people who were admitted to the hospital. </p>
                            
                            <p>Create another summary table but this time use the race ethnicity variable and examine differences in the outcomes mentioned above. 
                            </p>
                           
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </section>    
           
    <section>
        <div class="container"><h2>Emergency department visits from Jefferson Hospital</h2>
            <p>The dataset includes key variables such as:</p>
            <ul>
                <li>encounter_id: A unique identifier provided to each Emergency department visit</li>
                <li>patient_id: A unique patiend identifier provided to each patient who visits the Emergency department</li>
                <li>datetime: Date and time indicator Y-M-D HH:MM:SS </li>
                <li>doctor_id: Unique identifier of the doctor who saw the patient</li>
                <li>gender: A binary string variable for gender ("Male", "Female")</li>
                <li>race_ethn: String variable for race/ethnicity ("Non Hispanic White", "Hispanic White", "Non Hispanic Black, "AAPI", "Other")</li>
                <li>age: Numeric variable for age in years</li>
                <li>pain: Paient reported pain score from 0 to 10</li>
                <li>compliant_id: id for patient complaint</li>
                <li>complaint: Patient complaint text information</li>
                <li>dxg1: ICD10-CM code for diagnosis 1</li>
                <li>dxg1_desc: Description of diagnosis code 1</li>
                <li>dxg2: ICD10-CM code for diagnosis 2</li>
                <li>dxg2_desc: Description of diagnosis code 2</li>
                <li>dxg3: ICD10-CM code for diagnosis 3</li>
                <li>dxg3_desc: Description of diagnosis code 3</li>
                <li>dxg4: ICD10-CM code for diagnosis 4</li>
                <li>dxg4_desc: Description of diagnosis code 4</li>
                <li>dxg5: ICD10-CM code for diagnosis 5</li>
                <li>dxg5_desc: Description of diagnosis code 5</li>
                <li>drug1: Name of the drug received by patient at the Emergency Department</li>
                <li>drug1_class: Class of the drug received by the patient</li>
                <li>drug2: Name of the drug received by patient at the Emergency Department</li>
                <li>drug2_class: Class of the drug received by the patient</li>
                <li>drug3: Name of the drug received by patient at the Emergency Department</li>
                <li>drug3_class: Class of the drug received by the patient</li>
                <li>length_of_stay: Numeric length of stay in the Emergency Department in hours</li>
                <li>discharged_status: Categories for discharge status (Discharged to home, admitted to hospital, referral, death)</li>
                <li>patient_rating: Numeric 5 point patient rating of care</li>
                <li>cost: Numeric total cost of care at the emergency department</li>
            </ul></div>
        
    </section>
    
        <!-- Examples of Accessing the API Using Python -->
        
    <footer>
        <p>Tufts University School of Medicine</p>
    </footer>
    
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-r.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>

